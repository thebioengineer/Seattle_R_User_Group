---
title: "Seattle R Users Meetup"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

# Tonights Agenda

- 7-7:15  - Setup

- 7:15-8  - Intro To R and Visualization

- 8-8:30  - Networking

- 8:30 and beyond - Continue your conversations as you wish!

.footnote[
#### Thank you Axio Research for providing the space for our meetup today
]

---
# Tonights Goals

- For those of you new to R:
  - Learn some basics in R
  - Be able to generate a Visualization
  
- For you intermediate to advanced Folk:
  - Hopefully learn something new
  - Re-learn something you thought you knew
  - I promise to have more advanced topics in the future
  
  - Tonights dataset can be found [github.com/SeattleRUser/Meetings/July_2018/data.csv](github.com/SeattleRUser/Meetings/July_2018/data.csv)

- Meet someone new

- Start a more regular meetup schedule

---

#You talkin to ME??

- Ellis Hughes
  
  - R enthusiast for the past 3.5 years (but whose countin)
  
    - Use R in my free time for funsies
    
    - I use R every day for work
    
  - 2014 WSU Bioengineer Graduate
    - MATLAB
    
  - try-lingual -> I will try most any programming language
    

---
# Getting Started

- Install the latest version of R onto your computer from R-project.org at: [https://cloud.r-project.org/](https://cloud.r-project.org/).

- To make things easier, download the RStudio IDE from Rstudio at : [https://www.rstudio.com/products/rstudio/download/#download](https://www.rstudio.com/products/rstudio/download/#download)


---

# Hello World

### What in the world is an R?
- A statistical computing language, based off of S
- Free and Open Source Software

- Has a massive and inclusive community driving the development of software based on R in a variety of fields



## Stop me if you have any questions!!

---
# R

- "Object Oriented" language
  - That means that everything in R is an object
  - Everything has very specific properties and behaviors
  
- An object type is also known as a "class".

```{r Objects, eval=FALSE}

#Lowest Level Objects
TRUE #BOOLEANS (LOGICAL) - a true or false value
     # TRUE or FALSE

1 # INTEGER - A number with no decimals
  # 1,2,3,4,5

1.1 # NUMERIC - A number with the ability to have decimals 
    # 1.25, 3.14159, 95516501.1

"HELLO WORLD" #CHARACTER (STRING) - words or numbers within quotes 
    # "This is a character","42"

```

---

# R

- Value assignment to variables is done through `=` or `<-`.

- Most coding standards say to use `<-`

- Variables are representations of the values you are assigning to them

```{r ObjectsAssignment}

#Lowest Level Objects
BOOLEAN<-TRUE #TRUE or FALSE
INTEGER<-1 # A number with no decimals
NUMERIC<-1.1 # a number with the ability to have decimals
CHARACTER<-"HELLO WORLD" # words

fortyTwo=42 #valid

```
---

# Objects in Objects

Using the building blocks of those four object types, we have another set of classes that can hold those 4 basic object types.

```{r Objects_in_Objects}

# Vectors hold other objects, but they all must be of the same type
# one dimensional
VECTORS_BOOLEAN<-c(TRUE,TRUE,FALSE) 
VECTORS_NUMERIC<-c(1,2.5,3.14159267834)
VECTORS_CHARACTER<-c("THIS","is","A","Character","Vector")

# Matrixes hold other objects of the same type as well,
#  but in more of a spread sheet type fasion (2D)
MATRIX_NUMERIC<-matrix(c(1,2,3,4,5,6,7,8,9),ncol=3)

# data.frames are like matrixes, but the difference 
#  is each column can hold a different object type (2D)
DATA.FRAME <- data.frame(BOOLEANS=c(TRUE,TRUE,FALSE),
                         NUMERICS=c(132.4,56.7,89),
                         CHARACTER=c("THIS","IS A","DATA.FRAME!"))

```
---

# Objects in Objects 2.1

To access the data stored in these objects we use paired "square braces": [ ]

```{r Objects_in_Objects2}

# Vectors only have one dimension, so you extract
# using one value put into the square braces:
VECTORS_BOOLEAN[1]


# Matrixes and data.frames have two dimensions;
#  rows and columns, so you use potentially two
#  entries to extract them:
MATRIX_NUMERIC[1,1]
```

---

# Objects in Objects 2.1

```{r Objects_in_Objects2.1}
# But you can also leave one of the entries blank
#  to signify you are getting all rows or columns:

MATRIX_NUMERIC[1,] #all columns of row 1
MATRIX_NUMERIC[,1] #all rows of column 1

```

---

# Function Junction

In addition to variables, in R there are "functions". They act on the objects we give them and return a modified object!

```{r function_junction}

#Mathematical Operations (add, subtract, multiply, divide, ...)
add <- 2+2
subtract <- 10-2
multiply <- 2*5
divide <- 20/6
```

---

# Function Junction 1.2

```{r function_junction_1_2}
#built in functions

corr_matrix<-cor(x=data.frame(var1=c(1,2,3,4,5,6),
                              var2=c(4,5,6,7,8,9),
                              var3=c(11,9,7,5,3,1)))
#if you ever have any questions about a function,
#  type ? then the name of the function: ?cor 
#  This will bring up the help page for the "cor" function
corr_matrix
```
---

# Control Structures

- Say you would like to use a function on several rows, or a certain number of times until a condition is met.

- For example, you wanted to get the total sum of each row in your data.frame. You could do something like this:

```{r Control_Structures_1}

dataFrameExample<-data.frame(Col1=c(1,2,3,4,5,6),
                             Col2=c(7,8,9,10,11,12))
dataFrameSums<-c(NA,NA,NA,NA,NA,NA)

dataFrameSums[1]<-sum(dataFrameExample[1,])

## Now I copy and paste the above code for each row
dataFrameSums[2]<-sum(dataFrameExample[1,])
dataFrameSums[3]<-sum(dataFrameExample[2,])
dataFrameSums[4]<-sum(dataFrameExample[3,])
dataFrameSums[5]<-sum(dataFrameExample[5,])
dataFrameSums[6]<-sum(dataFrameExample[6,])

dataFrameSums
```

---

# Control Structures - Danger of Copy and Paste


```{r Control_Structures_2, eval=FALSE}
dataFrameSums[1]<-sum(dataFrameExample[1,])

## Now I copy and paste the above code for each row
{{dataFrameSums[2]<-sum(dataFrameExample[1,])}}
{{dataFrameSums[3]<-sum(dataFrameExample[2,])}}
{{dataFrameSums[4]<-sum(dataFrameExample[3,])}}
dataFrameSums[5]<-sum(dataFrameExample[5,])
dataFrameSums[6]<-sum(dataFrameExample[6,])

```

---

# Control Structures - Avoid the copy and paste

```{r Control_Structures_3, eval=FALSE}

for(value in c(1,2,3,4,5)){
  #do a thing
  cat(value)
}

if(1==1){
  #do a thing if true
}else if(2==2){
  #do a thing if this is true  
}else{
  #do a thing if above statements are false
}

while(value is true){
  #do a thing that alters value
}


```

---

# Control Structures - Use the For(ce), Luke

```{r Control_Structures_4}

dataFrameExample<-data.frame(Col1=c(1,2,3,4,5,6),
                             Col2=c(7,8,9,10,11,12))
dataFrameSums<-c(NA,NA,NA,NA,NA,NA)

#dataFrameSums[1]<-sum(dataFrameExample[1,])

for(rowinDF in c(1:6)){
  dataFrameSums[rowinDF]<-sum(dataFrameExample[rowinDF,])
}

dataFrameSums

```

---
# Graphics - you are what you see

```{r function_junction_1_4}
plot(data.frame(x=c(1,2,3,4,5,6),y=c(4,5,6,7,8,9)))
lines(x=c(1,2,3,4,5,5,6),y=c(5,7,8,9,7,6,6),col="red")

```

---

# Function Junction 2: Packages

Functions I just showed you are built into R, but sometimes you need to do something more advanced. 
you could:
  
  - a) create by yourself the entire complex algorithm, have to debug when new versions of R come out, ensure consistency, spend more time making sure your function works as it should than using it
  
  - b) copy someones code

R has something called the "Comprehensive R Archive Network" (CRAN) where very smart people that enjoy writing out very useful functions and then putting them online where they are available for everyone. The way you get to that is actually pretty straight-forward too!

More than likely, someone has created a package to do whatever you are trying to do. Take a quick google search to see if it does.   - The CRAN has over 12649 at of June 25th, and grows every day.

---

# Function Junction 2.2: Packages

```{r function_junction_packages_show, eval=FALSE}
#install.package("ggplot2")
library(ggplot2)
ggplot(data.frame(x=c(1,2,3,4,5,6),
                  y=c(4,5,6,7,8,9)))+
  geom_point(
    aes(x=x,y=y,
        color=as.factor(x),
        shape=as.factor(y)))+
ggtitle("This is such a B-e-a-utiful plot")

```

---

# Function Junction 2.2: Packages

```{r function_junction_packages_show_plot, echo=FALSE}
#install.package("ggplot2")
library(ggplot2)
ggplot(data.frame(x=c(1,2,3,4,5,6),
                  y=c(4,5,6,7,8,9)))+
  geom_point(
    aes(x=x,y=y,
        color=as.factor(x),
        shape=as.factor(y)))+
ggtitle("This is such a B-e-a-utiful plot")

```

---

# Getting Data into R

-That is all fine and dandy, but how do I get my data from a CSV or excel spreadsheet into my R session?? 
  - Am I supposed to type it all in, that seems like a waste of time!
  
-whole families of functions are written to import data into R!
  - usually start with "read":
    - base R has "read.table","read.csv","read.tsv", etc
    - additional packages open up additional ways to read in files:
        -openxlsx adds the "read.xlsx" function to read excel files



```{r data_import}

# download.file("https://raw.githubusercontent.com/fivethirtyeight/data/master/births/US_births_2000-2014_SSA.csv","US_births_2000-2014_SSA.csv",method = "libcurl")

# read.csv reads in the csv file from our computer
# we tell it that the file has a "header", and
# to make all values that are not numeric, characters
usBirths<-read.csv("US_births_2000-2014_SSA.csv",
                   header = TRUE,
                   stringsAsFactors = FALSE)

```

---

# All about Analysis

```{r data_look}
head(usBirths)
str(usBirths)
```


---

#TidyVerse & TidyData

- Hadley Wickham's brainchild
- makes reading and using functions very straight-forward

- a series of packages that contain functions to make data handling easy and understandable
- the core is the "pipe"-ing function = '%>%'

```{r tidy or not to tidy}
#install.packages("tidyverse")
library(tidyverse)

usBirths%>%
  str

```

Note that the output is identical to the original 'str(usBirths')

---

#Analysis Alley

We will now start the actual analysis. I will explain every step of the way, but let me know if I go too fast!

First, a hypothesis: There are more births on weekends than weekdays. 

```{r}

usBirths_weekend<-usBirths%>%
  mutate(Weekend=day_of_week==1 | day_of_week==7)# this adds a column to the data

head(usBirths_weekend)

```

---

#Analysis Alley

Great, you are on your way!

```{r, eval=FALSE}

#could do:
for(rowID)

head(usBirths_weekend)

```

---

Missing slides on additional analysis

---

In summary, thank you all so much for being here!

.footnote[ This entire presentation was created in R/rmd using the package [Xaringan](https://github.com/yihui/xaringan) by Yihui Xie]


---

